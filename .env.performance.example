# Database Performance Configuration
# Copy these settings to your .env file and adjust values based on your server specifications

# =============================================================================
# DATABASE CONNECTION OPTIMIZATION
# =============================================================================

# Enable persistent connections for better performance
DB_PERSISTENT=true

# Connection pool settings
DB_POOL_ENABLED=true
DB_POOL_MAX_CONNECTIONS=10
DB_POOL_MIN_CONNECTIONS=2
DB_POOL_CONNECTION_TIMEOUT=30
DB_POOL_IDLE_TIMEOUT=300

# MySQL specific optimizations
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci
DB_STRICT=true
DB_ENGINE=InnoDB

# =============================================================================
# QUERY OPTIMIZATION
# =============================================================================

# Enable query caching
DB_CACHE_ENABLED=true
DB_CACHE_DURATION=60
DB_CACHE_STORE=redis
DB_CACHE_PREFIX=db_cache
DB_CACHE_USE_TAGS=true

# Query logging and monitoring
DB_QUERY_LOGGING=false
DB_MAX_LOGGED_QUERIES=100
DB_SLOW_QUERY_LOGGING=true
DB_SLOW_QUERY_THRESHOLD=1000

# =============================================================================
# PAGINATION SETTINGS
# =============================================================================

# Optimize pagination for large datasets
DB_DEFAULT_PER_PAGE=12
DB_MAX_PER_PAGE=100
DB_USE_SIMPLE_PAGINATION=false
DB_CACHE_PAGINATION_COUNTS=true

# =============================================================================
# MEMORY OPTIMIZATION
# =============================================================================

# Memory settings for large result sets
DB_OPTIMIZE_LARGE_RESULTS=true
DB_CHUNK_SIZE=1000
DB_ENABLE_STREAMING=false
DB_QUERY_MEMORY_LIMIT=128

# =============================================================================
# INDEX OPTIMIZATION
# =============================================================================

# Index analysis and monitoring
DB_AUTO_INDEX_ANALYSIS=false
DB_INDEX_ANALYSIS_FREQUENCY=24
DB_INDEX_USAGE_MONITORING=false
DB_UNUSED_INDEX_THRESHOLD=30

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================

# Enable performance monitoring
DB_PERFORMANCE_MONITORING=false
DB_LOG_SLOW_QUERIES=true
DB_MONITOR_QUERY_PATTERNS=false

# Alert thresholds
DB_ALERT_QUERIES_PER_REQUEST=50
DB_ALERT_MEMORY_USAGE=256
DB_ALERT_RESPONSE_TIME=2000

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis configuration for optimal performance
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0

# Redis connection pool
REDIS_POOL_SIZE=10
REDIS_POOL_TIMEOUT=5

# Cache driver optimization
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# =============================================================================
# SESSION OPTIMIZATION
# =============================================================================

# Session configuration for performance
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null
SESSION_SECURE_COOKIE=false
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# =============================================================================
# QUEUE OPTIMIZATION
# =============================================================================

# Queue settings for background processing
QUEUE_CONNECTION=redis
QUEUE_FAILED_DRIVER=database

# Queue worker settings
QUEUE_WORKER_TIMEOUT=60
QUEUE_WORKER_SLEEP=3
QUEUE_WORKER_TRIES=3
QUEUE_WORKER_MAX_JOBS=1000
QUEUE_WORKER_MAX_TIME=3600

# =============================================================================
# FILE SYSTEM OPTIMIZATION
# =============================================================================

# File system settings
FILESYSTEM_DISK=local
FILESYSTEM_CACHE_DISK=local

# Image optimization
FILAMENT_IMAGE_OPTIMIZATION=true
FILAMENT_IMAGE_QUALITY=85
FILAMENT_IMAGE_MAX_WIDTH=1200
FILAMENT_IMAGE_MAX_HEIGHT=1200

# =============================================================================
# LOGGING OPTIMIZATION
# =============================================================================

# Log configuration for performance
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# Disable debug mode in production
APP_DEBUG=false
APP_ENV=production

# =============================================================================
# OPCACHE OPTIMIZATION (PHP.INI SETTINGS)
# =============================================================================

# Add these to your php.ini file for optimal performance:
#
# opcache.enable=1
# opcache.enable_cli=1
# opcache.memory_consumption=256
# opcache.interned_strings_buffer=16
# opcache.max_accelerated_files=20000
# opcache.validate_timestamps=0
# opcache.revalidate_freq=0
# opcache.save_comments=0
# opcache.fast_shutdown=1

# =============================================================================
# MYSQL CONFIGURATION RECOMMENDATIONS
# =============================================================================

# Add these to your MySQL configuration (my.cnf):
#
# [mysqld]
# innodb_buffer_pool_size=1G
# innodb_log_file_size=256M
# innodb_flush_log_at_trx_commit=2
# innodb_flush_method=O_DIRECT
# query_cache_type=1
# query_cache_size=64M
# query_cache_limit=2M
# tmp_table_size=64M
# max_heap_table_size=64M
# sort_buffer_size=2M
# read_buffer_size=2M
# read_rnd_buffer_size=8M
# myisam_sort_buffer_size=64M
# thread_cache_size=8
# table_open_cache=4000
# max_connections=200

# =============================================================================
# ADDITIONAL PERFORMANCE SETTINGS
# =============================================================================

# Broadcast driver (use pusher or redis for real-time features)
BROADCAST_DRIVER=pusher

# Mail queue (send emails asynchronously)
MAIL_MAILER=smtp
QUEUE_MAIL=true

# Asset optimization
MIX_ASSET_URL="${APP_URL}"
ASSET_URL="${APP_URL}"

# Telescope (disable in production)
TELESCOPE_ENABLED=false

# Debugbar (disable in production)
DEBUGBAR_ENABLED=false
